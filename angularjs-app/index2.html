<!DOCTYPE html>
<html>
<head>
	<title>SearchTwitterFeeds</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="public/js/angular.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>


<style type="text/css">

	textarea.ng-valid {
		background-color: green;
	}

	textarea.ng-invalid {
		background-color: yellow;
	}

	form.ng-pristine {
		background-color: aqua;
	}

	form.ng-dirty {
		background-color: mediumaquamarine;
	}

</style>

</head>
<body>


<div class="container-fluid" ng-app="formModule" ng-controller="formController">

<h1>Search Recipes based on Ingredients</h1>
<br><br>

<div style="width:300px;"">
<form method="POST" action="xxxx" name="searchTagsForm" novalidate>
	<div class="form-group" >
		<label for="">Enter tags:</label>
		<textarea class="form-control" rows="3" name="search_tags" id="search_tags" ng-model="searchTagsModel" ng-minlength="4" ng-maxlength="32" placeholder="Enter search tags.." required></textarea>
		<span ng-show="searchTagsForm.search_tags.$dirty && searchTagsForm.search_tags.$invalid">
			<span ng-show="searchTagsForm.search_tags.$error.required">
				<li><span style="color: red;">Search Tags is Required!</span></li>
			</span>
		</span>

	</div>
	<!-- <button type="submit" class="btn btn-primary">Search</button> -->
	<button class="btn btn-primary" ng-disabled="searchTagsForm.search_tags.$invalid" ng-click="submit()">Search</button>
	<button class="btn btn-danger" ng-click="reset()">Reset</button>
</form>
</div>
<br><br>
<hr>


<h2>Search Results..</h2>
<br>

<!-- <div ng-app="formModule" ng-controller="formController">  -->
<div> 
<table class="table table-striped" border="1" style="width:800px;">
<thead>
	<tr>
		<th>Title</th>
		<th>Images</th>
		<th>Ingredients</th>
		<th>Recipes</th>
	</tr>
</thead>
<tbody>
	<tr ng-repeat="x in myData">
		<td>{{ x.title }}</td>
		<td><img src="{{ x.thumbnail }}" alt="{{ x.title }}" width="120px" height="80px" title="{{ x.title }}"></td>
		<td>{{ x.ingredients }}</td>
		<td><a href="{{ x.href }}" title="{{ x.href }}">Click to Explore Recipes..</a></td>
	</tr>
</tbody>
</table>
</div>


</div>


<script>
var app = angular.module('formModule', []);


app.controller('formController', function($scope) {
            $scope.reset = function(){
               $scope.search_tags = "";
            }
            
            $scope.reset();
         });


app.controller('formController', function($scope, $http) {
  // $http.get("http://localhost/other/anguler-js-proj/insi-iim-angulerjs-app/angularjs-app/json-data.json").then(function (response) {
  //     $scope.myData = response.data.results;
  // });

$http({
        method: 'POST',
        url: 'http://localhost/other/anguler-js-proj/insi-iim-angulerjs-app/angularjs-app/json-data.json',
        headers: {'Content-Type': 'text/html; charset=UTF-8'},
        data: {
            FullName: $scope.FullName,
            Email: $scope.Email,
            File1: $scope.file
        },
        transformRequest: function (data, headersGetter) {
            var formData = new FormData();
            angular.forEach(data, function (value, key) {
                formData.append(key, value);
            });
            return formData;
        }
    })
    .success(function (data) {

    })
    .error(function (data, status) {

    });

    return false;



});
</script>


</body>
</html>